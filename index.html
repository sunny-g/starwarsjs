<html>
<head>
  <title>StarWarsJS</title>
</head>
<body>
  <canvas id='display' width='1' height='1' style='width: 100%; height: 100%;' />
  <!-- <canvas id='displayLeft' width='1' height='1' style='width: 50%; height: 100%;' /> -->
  <!-- <canvas id='displayRight' width='1' height='1' style='width: 50%; height: 100%;' /> -->

  <script src="loop.js"></script>
  <script src="controls.js"></script>
  <script src="map.js"></script>
  <script src="player.js"></script>
  <script src="camera.js"></script>

  <script type="text/javascript">
    var display = document.getElementById('display');
    var player = new Player(15.3, -1.2, Math.PI * 0.3);
    var map = new Map(32);
    var controls = new Controls();
    var camera = new Camera(display, MOBILE ? 160 : 320, 0.8);
    var loop = new GameLoop();

    map._randomize();

    /**
     * start the requestAnimationFrame calls
     * 
     * update the map with seconds?
     * grab controls state, update player orientation in this tick
     * redraw the columns and sky
     */
    loop.start(function frame(seconds) {
      map.update(seconds);
      player.update(controls.states, map, seconds);
      camera.render(player, map);
    });

  </script>
</body>
</html>